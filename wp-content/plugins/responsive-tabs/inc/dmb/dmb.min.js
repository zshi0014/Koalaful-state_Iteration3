/**
 * Team Members Admin JS
 */

!function(t){t(document).ready(function(){var e;e=jQuery.fn.clone,jQuery.fn.clone=function(){for(var i=e.apply(this,arguments),n=this.find("textarea").add(this.filter("textarea")),o=i.find("textarea").add(i.filter("textarea")),d=this.find("select").add(this.filter("select")),s=i.find("select").add(i.filter("select")),a=0,l=n.length;a<l;++a)t(o[a]).val(t(n[a]).val());for(a=0,l=d.length;a<l;++a)s[a].selectedIndex=d[a].selectedIndex;return i};var i=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");function n(t){return isNaN(t)?"00":i[(t-t%16)/16]+i[t%16]}function o(){t(".dmb_main").not(".dmb_empty_row").length>0?t(".dmb_no_row_notice").hide():t(".dmb_no_row_notice").show()}function d(t,e){e||(e=!1);var i=(t=t).closest(".dmb_main").find(".dmb_handle_title");cloneCopyText="",cloneCopyText=e?" copy":"",""!=t.val()?i.html(t.val()+cloneCopyText):i.html(objectL10n.untitled+cloneCopyText)}t(".dmb_color_picker").wpColorPicker(),t(".dmb_main").not(".dmb_empty_row").each(function(e,i){t(this).find(".dmb_tab_content").each(function(e,i){""==t.trim(t(this).text())?t(this).hide():t(this).show(),t(this).html(t.parseHTML(t(this).text()))})}),o(),t(".dmb_add_row").on("click",function(){var e=t(".dmb_empty_row").clone(!0);return e.removeClass("dmb_empty_row").addClass("dmb_main").show(),e.insertBefore(t(".dmb_empty_row")),e.find(".dmb_tab_title").focus(),e.find(".dmb_color_picker_ready").removeClass(".dmb_color_picker_ready").addClass(".dmb_color_picker").wpColorPicker().css({padding:"3px"}),e.find(".dmb_handle_title").html(objectL10n.untitled),e.find(".dmb_tab_content").hide(),o(),!1}),t(".dmb_remove_row_btn").click(function(e){return t(this).closest(".dmb_main").remove(),o(),!1}),t(".dmb_handle").click(function(e){return t(this).siblings(".dmb_inner").slideToggle(50),t(this).hasClass("closed")?t(this).removeClass("closed"):t(this).addClass("closed"),!1}),t(".dmb_collapse_rows").click(function(e){return t(".dmb_handle").each(function(e,i){t(this).closest(".dmb_empty_row").length||t(this).hasClass("closed")||(t(this).siblings(".dmb_inner").slideToggle(50),t(this).addClass("closed"))}),!1}),t(".dmb_expand_rows").click(function(e){return t(".dmb_handle").each(function(e,i){t(this).hasClass("closed")&&(t(this).siblings(".dmb_inner").slideToggle(50),t(this).removeClass("closed"))}),!1}),t(".dmb_move_row_down").click(function(e){t(this).closest(".dmb_main").next().hasClass("dmb_main")&&(t(this).closest(".dmb_main").clone(!0).insertAfter(t(this).closest(".dmb_main").next()),t(this).closest(".dmb_main").remove());return!1}),t(".dmb_move_row_up").click(function(e){t(this).closest(".dmb_main").prev().hasClass("dmb_main")&&(t(this).closest(".dmb_main").clone(!0).insertBefore(t(this).closest(".dmb_main").prev()),t(this).closest(".dmb_main").remove());return!1}),t(".dmb_clone_row").click(function(e){var i=t(this).closest(".dmb_main").clone(!0);return i.insertAfter(t(this).closest(".dmb_main")),i.find(".dmb_handle_title").html(i.find(".dmb_tab_title").val()+" (copy)"),i.find(".dmb_tab_title").focus(),d(i.find(".dmb_tab_title"),!0),o(),!1}),t(".dmb_main").not(".dmb_empty_row").each(function(e,i){""!=t(this).find(".dmb_tab_title").val()&&d(t(this).find(".dmb_tab_title"))}),t("body").on("keyup",".dmb_tab_title",function(e){d(t(this))}),t(".dmb_show_preview_tab_set").click(function(){var e,i={},o={},d="";i.breakpoint=t(".dmb_breakpoint").val(),i.color=((e=t(".wp-color-result").css("backgroundColor"))?"#"+n((e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))[1])+n(e[2])+n(e[3]):void 0)||"#8dba09",i.tabBackground=t("select[name='tabs_tbgs']").val(),o.tabCount=t(".dmb_main").not(".dmb_empty_row").size(),d+='<div class="rtbs" style="margin-top:100px; margin-bottom:60px;">',d+='<div class="rtbs_breakpoint" style="display:none">'+i.breakpoint+"</div>",d+='<div class="rtbs_inactive_tab_background" style="display:none">'+i.tabBackground+"</div>",d+='<div class="rtbs_color" style="display:none">'+i.color+"</div>",d+='<div class="rtbs_menu">',d+='<ul><li class="mobile_toggle">&zwnj;</li>',t(".dmb_main").not(".dmb_empty_row").each(function(e,n){var o={};o.title=t(this).find(".dmb_tab_title").val(),t("#acf-fallback-bio").length?o.content=t.trim(t(this).find(".dmb_tab_content_fb").text())||"":o.content=t.trim(t(this).find(".dmb_tab_content").html())||"",0==e?(d+="<style>.rtbs li {font-size:15px;} .rtbs_content, .rtbs_content p {font-size:15px;}</style>",d+='<li class="current">',d+='<a style="background:'+i.color+'" class="active prev-tab-link-'+e+'" href="#" data-tab="#prev-tab-'+e+'">',o.title?d+=o.title:d+="&nbsp;",d+="</a>",d+="</li>"):(d+='<li style="font-size:15px;">',d+='<a href="#" data-tab="#prev-tab-'+e+'" class="prev-tab-link-'+e+'">',o.title?d+=o.title:d+="&nbsp;",d+="</a>",d+="</li>")}),d+="</ul></div>",t(".dmb_main").not(".dmb_empty_row").each(function(e,n){var o={};o.title=t(this).find(".dmb_tab_title").val(),t("#acf-fallback-bio").length?o.content=t.trim(t(this).find(".dmb_tab_content_fb").text())||"":o.content=t.trim(t(this).find(".dmb_tab_content").html())||"",0==e?(d+='<div style="border-top:7px solid '+i.color+'; " id="prev-tab-'+e+'" class="rtbs_content active">',d+=o.content,d+='<div style="margin-top:30px; clear:both;"></div></div>'):(d+='<div style="border-top:7px solid '+i.color+'; " id="prev-tab-'+e+'" class="rtbs_content">',d+=o.content,d+='<div style="margin-top:30px; clear:both;"></div></div>')}),d+="</div>",d+='<div style="clear:both;"></div>',d+='<div class="dmb_accuracy_preview_notice">'+objectL10n.previewAccuracy+"</div>",0==o.tabCount?t("#dmb_preview_tabs").append('<div class="dmb_no_row_preview_notice">'+objectL10n.noTabNotice+"</div>"):t("#dmb_preview_tabs").append(d),t("#dmb_preview_tabs").fadeIn(100)}),t(".dmb_preview_tabs_close").click(function(){t("#dmb_preview_tabs .rtbs, .dmb_accuracy_preview_notice, .dmb_no_row_preview_notice").remove(),t("#dmb_preview_tabs").fadeOut(100)});var s="";t(".dmb_edit_tab_content").click(function(){var e=(s=t(this).parent().find(".dmb_tab_content")).html();t("#wp-dmb_editor-wrap").hasClass("tmce-active")?tinyMCE.editors[0].setContent(e):t("#dmb_editor").val(t.trim(e)),t("#dmb_unique_editor").fadeIn(100),null!==tinyMCE.activeEditor&&tinyMCE.activeEditor.focus()}),t(".dmb_ue_update").click(function(){if(t("#wp-dmb_editor-wrap").hasClass("tmce-active"))var e=tinyMCE.activeEditor.getContent();else e=t("#dmb_editor").val();return e?s.show():s.hide(),s.html(t.parseHTML(e)),s.siblings(".biofield").val(e),t("#dmb_unique_editor").fadeOut(100),null!==tinymce.activeEditor&&tinymce.activeEditor.setContent(""),!1}),t(".dmb_ue_cancel").click(function(){t("#dmb_unique_editor").fadeOut(100)})})}(jQuery);