!function(e){var t={};function n(o){if(t[o])return t[o].exports;var c=t[o]={i:o,l:!1,exports:{}};return e[o].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(o,c,function(t){return e[t]}.bind(null,c));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=150)}({0:function(e,t){!function(){e.exports=this.wp.element}()},1:function(e,t){!function(){e.exports=this.wp.i18n}()},10:function(e,t){!function(){e.exports=this.NelioContent.date}()},11:function(e,t){!function(){e.exports=this.NelioContent.components}()},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},150:function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"getActiveFeed",(function(){return O})),n.d(o,"isLoadingFeed",(function(){return j})),n.d(o,"isLoadingAFeed",(function(){return g})),n.d(o,"isFeedLoaded",(function(){return v})),n.d(o,"getItem",(function(){return y})),n.d(o,"getAllItems",(function(){return E})),n.d(o,"getAllItemsInFeed",(function(){return h}));var c={};n.r(c),n.d(c,"setActiveFeed",(function(){return w})),n.d(c,"loadFeedItems",(function(){return A})),n.d(c,"receiveItems",(function(){return S})),n.d(c,"markFeedAsLoading",(function(){return P})),n.d(c,"markFeedAsLoaded",(function(){return C}));var i=n(0),r=(n(33),n(2)),a=n(8),s=n.n(a),l=n(4),d=(n(28),n(17)),u=n.n(d),f=n(5),b=n(9);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e){return e.activeFeed||"all-feeds"}function j(e,t){return e.loadingFeeds.includes(t)}function g(e){return!Object(b.isEmpty)(e.loadingFeeds)}function v(e,t){return e.loadedFeeds.includes(t)}function y(e,t){return e.items.byId[t]}function E(e){return Object(f.keys)(e.items.byId)}function h(e,t){return e.items.byFeedId[t]||[]}var F=n(7),_=n.n(F),x=n(16),I=_.a.mark(A);function w(e){return{type:"SET_ACTIVE_FEED",feedId:e}}function A(e){var t;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(l.dispatch)("nelio-content/feeds","markFeedAsLoading",e,!0);case 2:return n.prev=2,n.next=5,Object(l.apiFetch)({path:Object(x.addQueryArgs)("/nelio-content/v1/feeds/items",{id:e})});case 5:return t=n.sent,n.next=8,Object(l.dispatch)("nelio-content/feeds","receiveItems",e,t);case 8:n.next=12;break;case 10:n.prev=10,n.t0=n.catch(2);case 12:return n.next=14,Object(l.dispatch)("nelio-content/feeds","markFeedAsLoading",e,!1);case 14:return n.next=16,Object(l.dispatch)("nelio-content/feeds","markFeedAsLoaded",e);case 16:case"end":return n.stop()}}),I,null,[[2,10]])}function S(e,t){return{type:"RECEIVE_ITEMS",feedId:e,items:t}}function P(e,t){return{type:"MARK_FEED_AS_LOADING",feedId:e,isLoading:t}}function C(e){return{type:"MARK_FEED_AS_LOADED",feedId:e}}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object(r.registerStore)("nelio-content/feeds",{reducer:function(e,t){switch(e||(e={activeFeed:"all-feeds",items:{byId:{},byFeedId:{}},loadingFeeds:[],loadedFeeds:[]}),t.type){case"SET_ACTIVE_FEED":return p(p({},e),{},{activeFeed:t.feedId});case"RECEIVE_ITEMS":var n=Object(f.map)(t.items,(function(e){return p(p({},e),{},{title:Object(b.decodeHtmlEntities)(e.title),excerpt:Object(b.decodeHtmlEntities)(e.excerpt),authors:Object(f.map)(e.authors,b.decodeHtmlEntities)})})),o=Object(f.values)(e.items.byId);o=[].concat(u()(o),u()(n)),o=Object(f.reverse)(Object(f.sortBy)(o,"date")),o=Object(f.keyBy)(o,"id");var c=e.items.byFeedId[t.feedId]||[];return c=[].concat(u()(c),u()(Object(f.map)(n,"id"))),c=Object(f.map)(c,(function(e){return o[e]})),c=Object(f.reverse)(Object(f.sortBy)(c,"date")),c=Object(f.map)(c,"id"),p(p({},e),{},{items:p(p({},e.items),{},{byId:o,byFeedId:p(p({},e.items.byFeedId),{},s()({},t.feedId,c))})});case"MARK_FEED_AS_LOADING":return t.isLoading?p(p({},e),{},{loadingFeeds:Object(f.uniq)([].concat(u()(e.loadingFeeds),[t.feedId])),loadedFeeds:Object(f.without)(e.loadingFeeds,t.feedId)}):p(p({},e),{},{loadingFeeds:Object(f.without)(e.loadingFeeds,t.feedId)});case"MARK_FEED_AS_LOADED":return p(p({},e),{},{loadingFeeds:Object(f.without)(e.loadingFeeds,t.feedId),loadedFeeds:Object(f.uniq)([].concat(u()(e.loadedFeeds),[t.feedId]))})}return e},controls:l.controls,actions:D({},c),selectors:D({},o)});var L=n(3),k=n(1),M=n(45),T=n.n(M),R=n(26),B=n.n(R),U=(n(114),n(6)),V=Object(r.withSelect)((function(e){var t=e("nelio-content/data"),n=t.canCurrentUserManagePlugin;return{feedSettingsUrl:(0,t.getAdminUrl)("admin.php",{page:"nelio-content-settings",tab:"feeds"}),isVisible:n()}})),K=Object(U.ifCondition)((function(e){return e.isVisible})),q=Object(U.compose)(V,K)((function(e){var t=e.feedSettingsUrl;return Object(i.createElement)("a",{className:"page-title-action",href:t},Object(k._x)("Add New","command (feed)","nelio-content"))})),G=(n(115),Object(r.withSelect)((function(e){var t=e("nelio-content/data").getFeeds,n=e("nelio-content/feeds"),o=n.isLoadingFeed,c=n.isLoadingAFeed,i=n.getActiveFeed,r={value:"all-feeds",label:Object(k._x)("Show all feeds","command","nelio-content")},a=Object(f.map)(t(),(function(e){return{value:e.id,label:e.name}}));return{activeFeed:i(),options:[r].concat(u()(Object(f.sortBy)(a,"label"))),isLoading:"all-feeds"!==i()?o(i()):c()}}))),H=Object(r.withDispatch)((function(e){return{setActiveFeed:e("nelio-content/feeds").setActiveFeed}})),$=Object(U.ifCondition)((function(e){return 2<e.options.length})),Q=Object(U.compose)(G,H,$)((function(e){var t=e.activeFeed,n=e.isLoading,o=e.options,c=e.setActiveFeed;return o.length<2?null:Object(i.createElement)("div",{className:"nelio-content-feed-filter"},Object(i.createElement)(L.SelectControl,{disabled:n,options:o,value:t,onChange:c}))})),W=n(11),z=n(10),J=(n(116),Object(r.withSelect)((function(e,t){var n=t.itemId,o=e("nelio-content/feeds").getItem,c=e("nelio-content/data"),i=c.canCurrentUserCreatePosts,r=c.canCurrentUserCreateMessagesAlways,a=c.getFeed,s=o(n)||{},l=a(s.feedId)||{};return{attributes:s,canCreateMessages:r(),canCreatePosts:i(),feed:l}}))),X=Object(r.withDispatch)((function(e,t){var n=t.attributes,o=t.feed,c=e("nelio-content/social-message-editor"),i=c.openNewSocialMessageEditor,r=c.disablePostSearcher,a=e("nelio-content/post-quick-editor"),s=a.openNewPostEditor,l=a.showEditorInfo,d=a.setReference;return{createMessage:function(){var e=n.title,t=n.permalink,c=o.twitter,a=Object(b.isEmpty)(c)?"".concat(e," ").concat(t):"".concat(e," /cc ").concat(c," ").concat(t);i(!1,{text:a,textComputed:a}),r()},createPost:function(){var e=n.title,t=n.permalink;s({title:e}),d(t),l()}}})),Y=Object(U.compose)(J,X)((function(e){var t=e.canCreateMessages,n=e.canCreatePosts,o=e.createMessage,c=e.createPost,r=e.attributes,a=r.title,s=r.permalink,l=r.author,d=r.date,u=r.excerpt,f=e.feed,b=f.icon,m=f.name;return Object(i.createElement)("div",{className:"nelio-content-feed-list-item"},Object(i.createElement)("div",{className:"nelio-content-feed-list-item__title"},a),!!s&&Object(i.createElement)("div",{className:"nelio-content-feed-list-item__permalink"},Object(i.createElement)(L.ExternalLink,{href:s},s)),Object(i.createElement)("div",{className:"nelio-content-feed-list-item__icon"},Object(i.createElement)("div",{className:"nelio-content-feed-list-item__actual-icon",title:m,style:{backgroundColor:b&&"transparent",backgroundImage:b&&"url(".concat(b,")")}})),Object(i.createElement)("div",{className:"nelio-content-feed-list-item__meta"},Object(k.sprintf)(Object(k._x)("Published by %1$s on %2$s","text","nelio-content"),l,Object(z.dateI18n)(Object(z.__experimentalGetSettings)().formats.date,d))),Object(i.createElement)("div",{className:"nelio-content-feed-list-item__excerpt"},u),Object(i.createElement)("div",{className:"nelio-content-feed-list-item__actions"},t&&Object(i.createElement)(L.Button,{isSecondary:!0,isSmall:!0,onClick:o},Object(i.createElement)("span",{className:"nelio-content-feed-list-item__action-label"},Object(i.createElement)(L.Dashicon,{icon:"share"}),Object(k._x)("Share","command","nelio-content"))),n&&Object(i.createElement)(L.Button,{isSecondary:!0,isSmall:!0,onClick:c},Object(i.createElement)("span",{className:"nelio-content-feed-list-item__action-label"},Object(i.createElement)(L.Dashicon,{icon:"edit"})," ",Object(k._x)("Write about it","command","nelio-content")))))})),Z=Object(r.withSelect)((function(e){var t=e("nelio-content/feeds"),n=t.isLoadingFeed,o=t.isLoadingAFeed,c=t.getActiveFeed,i=t.getAllItems,r=t.getAllItemsInFeed,a="all-feeds"!==c();return{isSingleFeed:a,itemIds:a?r(c()):i(),isLoading:a?n(c()):o()}}))((function(e){var t=e.isLoading,n=e.isSingleFeed,o=e.itemIds;return t?Object(i.createElement)("div",{className:"nelio-content-feed-item-list"},Object(i.createElement)(W.LoadingAnimation,null)):Object(b.isEmpty)(o)?Object(i.createElement)("div",{className:"nelio-content-feed-item-list"},n?Object(k._x)("This feed doesn’t have any publications.","text","nelio-content"):Object(k._x)("We couldn’t find any publications in your feeds.","text","nelio-content")):Object(i.createElement)("div",{className:"nelio-content-feed-item-list"},o.map((function(e){return Object(i.createElement)(Y,{key:e,itemId:e})})))})),ee=function(){return Object(i.createElement)("div",{className:"nelio-content-feeds"},Object(i.createElement)(i.StrictMode,null,Object(i.createElement)(L.SlotFillProvider,null,Object(i.createElement)("div",{className:"nelio-content-feeds__title"},Object(i.createElement)("h1",{className:"nelio-content-feeds__actual-title wp-heading-inline"},Object(k._x)("Feeds","text","nelio-content"),Object(i.createElement)(q,null)),Object(i.createElement)(Q,null)),Object(i.createElement)(Z,null),Object(i.createElement)(T.a,null),Object(i.createElement)(B.a,null),Object(i.createElement)(L.Popover.Slot,null))))};window.NelioContent=window.NelioContent||{},window.NelioContent.initPage=function(e,t){var n,o;n=Object(r.select)("nelio-content/data").getFeedIds,o=Object(r.dispatch)("nelio-content/feeds").loadFeedItems,n().forEach(o);var c=document.getElementById(e);Object(i.render)(Object(i.createElement)(ee,t),c)}},16:function(e,t){!function(){e.exports=this.wp.url}()},17:function(e,t,n){var o=n(29),c=n(30),i=n(24),r=n(31);e.exports=function(e){return o(e)||c(e)||i(e)||r()}},19:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}},2:function(e,t){!function(){e.exports=this.wp.data}()},24:function(e,t,n){var o=n(19);e.exports=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}},26:function(e,t){!function(){e.exports=this.NelioContent.socialMessageEditor}()},28:function(e,t){!function(){e.exports=this.NelioContent.data}()},29:function(e,t,n){var o=n(19);e.exports=function(e){if(Array.isArray(e))return o(e)}},3:function(e,t){!function(){e.exports=this.wp.components}()},30:function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},31:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},33:function(e,t){!function(){e.exports=this.wp.notices}()},4:function(e,t){!function(){e.exports=this.wp.dataControls}()},45:function(e,t){!function(){e.exports=this.NelioContent.postQuickEditor}()},5:function(e,t){!function(){e.exports=this.lodash}()},6:function(e,t){!function(){e.exports=this.wp.compose}()},7:function(e,t){!function(){e.exports=this.regeneratorRuntime}()},8:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},9:function(e,t){!function(){e.exports=this.NelioContent.utils}()}});