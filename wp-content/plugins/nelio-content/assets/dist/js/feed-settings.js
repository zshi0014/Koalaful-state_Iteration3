!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=149)}({0:function(e,t){!function(){e.exports=this.wp.element}()},1:function(e,t){!function(){e.exports=this.wp.i18n}()},109:function(e,t,n){},11:function(e,t){!function(){e.exports=this.NelioContent.components}()},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},149:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"getFeedUrl",(function(){return O})),n.d(r,"isAddingAFeed",(function(){return g})),n.d(r,"getEditingFeedId",(function(){return E})),n.d(r,"getEditingFeedName",(function(){return j})),n.d(r,"getEditingFeedTwitter",(function(){return v})),n.d(r,"isSavingAFeed",(function(){return h})),n.d(r,"isDeletingFeed",(function(){return w})),n.d(r,"isDeletingAFeed",(function(){return y}));var i={};n.r(i),n.d(i,"addFeed",(function(){return N})),n.d(i,"saveFeed",(function(){return T})),n.d(i,"deleteFeed",(function(){return I})),n.d(i,"setNewFeedUrl",(function(){return P})),n.d(i,"markAsAddingFeed",(function(){return k})),n.d(i,"openEditor",(function(){return C})),n.d(i,"closeEditor",(function(){return R})),n.d(i,"setEditingFeedName",(function(){return M})),n.d(i,"setEditingFeedTwitter",(function(){return B})),n.d(i,"markAsSaving",(function(){return L})),n.d(i,"markAsDeleting",(function(){return U}));var o=n(0),c=n(8),a=n.n(c),d=n(2),s=n(4),u=(n(28),n(17)),l=n.n(u),f=n(5);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=n(9);function O(e){return(e.addFeedForm||{}).url||""}function g(e){return(e.addFeedForm||{}).isAddingFeed||!1}function E(e){return(e.feedEditor||{}).feedId}function j(e){return(e.feedEditor||{}).feedName||""}function v(e){return(e.feedEditor||{}).feedTwitter||""}function h(e){return(e.feedEditor||{}).isSaving||!1}function w(e,t){return e.feedsBeingDeleted.includes(t)}function y(e){return!Object(m.isEmpty)(e.feedsBeingDeleted)}var F=n(7),x=n.n(F),_=n(16),A=x.a.mark(N),S=x.a.mark(T),D=x.a.mark(I);function N(e){var t;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(s.dispatch)("nelio-content/feed-settings","markAsAddingFeed",!0);case 2:return n.prev=2,n.next=5,Object(s.apiFetch)({path:"/nelio-content/v1/feeds/",method:"POST",data:{url:e}});case 5:return t=n.sent,n.next=8,Object(s.dispatch)("nelio-content/data","receiveFeeds",[t]);case 8:return n.next=10,Object(s.dispatch)("nelio-content/feed-settings","setNewFeedUrl","");case 10:n.next=14;break;case 12:n.prev=12,n.t0=n.catch(2);case 14:return n.next=16,Object(s.select)("nelio-content/data","getFeeds");case 16:if(1!==n.sent.length){n.next=20;break}return window.location.reload(),n.abrupt("return");case 20:return n.next=22,Object(s.dispatch)("nelio-content/feed-settings","markAsAddingFeed",!1);case 22:case"end":return n.stop()}}),A,null,[[2,12]])}function T(e,t){var n,r,i;return x.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return n=t.name,r=t.twitter,o.next=3,Object(s.dispatch)("nelio-content/feed-settings","markAsSaving",!0);case 3:return o.prev=3,o.next=6,Object(s.apiFetch)({path:"/nelio-content/v1/feeds/",method:"PUT",data:{id:e,name:n||void 0,twitter:r||void 0}});case 6:return i=o.sent,o.next=9,Object(s.dispatch)("nelio-content/data","receiveFeeds",[i]);case 9:o.next=13;break;case 11:o.prev=11,o.t0=o.catch(3);case 13:return o.next=15,Object(s.dispatch)("nelio-content/feed-settings","closeEditor");case 15:return o.next=17,Object(s.dispatch)("nelio-content/feed-settings","markAsSaving",!1);case 17:case"end":return o.stop()}}),S,null,[[3,11]])}function I(e){var t;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(s.dispatch)("nelio-content/feed-settings","markAsDeleting",!0);case 2:return n.prev=2,n.next=5,Object(s.apiFetch)({path:Object(_.addQueryArgs)("/nelio-content/v1/feeds/",{id:e}),method:"DELETE"});case 5:return n.next=7,Object(s.dispatch)("nelio-content/data","removeFeed",e);case 7:n.next=11;break;case 9:n.prev=9,n.t0=n.catch(2);case 11:return n.next=13,Object(s.select)("nelio-content/data","getFeeds");case 13:if(t=n.sent,!Object(m.isEmpty)(t)){n.next=17;break}return window.location.reload(),n.abrupt("return");case 17:return n.next=19,Object(s.dispatch)("nelio-content/feed-settings","markAsDeleting",!1);case 19:case"end":return n.stop()}}),D,null,[[2,9]])}function P(e){return{type:"SET_NEW_FEED_URL",url:e}}function k(e){return{type:"MARK_AS_ADDING_FEED",isAddingFeed:e}}function C(e,t){return{type:"OPEN_EDITOR",feedId:e,feedName:t.name,feedTwitter:t.twitter}}function R(){return{type:"CLOSE_EDITOR"}}function M(e){return{type:"SET_EDITING_FEED_NAME",feedName:e}}function B(e){return{type:"SET_EDITING_FEED_TWITTER",feedTwitter:e}}function L(e){return{type:"MARK_AS_SAVING",isSaving:e}}function U(e,t){return{type:"MARK_AS_DELETING",feedId:e,isDeleting:t}}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object(d.registerStore)("nelio-content/feed-settings",{reducer:function(e,t){switch(e||(e={addFeedForm:{url:"",isAddingFeed:!1},feedEditor:{isOpen:!1},feedsBeingDeleted:[]}),t.type){case"SET_NEW_FEED_URL":return p(p({},e),{},{addFeedForm:p(p({},e.addFeedForm),{},{url:t.url})});case"MARK_AS_ADDING_FEED":return p(p({},e),{},{addFeedForm:p(p({},e.addFeedForm),{},{isAddingFeed:!!t.isAddingFeed})});case"OPEN_EDITOR":return p(p({},e),{},{feedEditor:{isOpen:!0,feedId:t.feedId,feedName:t.feedName,feedTwitter:t.feedTwitter}});case"CLOSE_EDITOR":return p(p({},e),{},{feedEditor:{isOpen:!1}});case"SET_EDITING_FEED_NAME":return p(p({},e),{},{feedEditor:p(p({},e.feedEditor),{},{feedName:t.feedName})});case"SET_EDITING_FEED_TWITTER":return p(p({},e),{},{feedEditor:p(p({},e.feedEditor),{},{feedTwitter:t.feedTwitter})});case"MARK_AS_SAVING":return p(p({},e),{},{feedEditor:p(p({},e.feedEditor),{},{isSaving:t.isSaving})});case"MARK_AS_DELETING":return p(p({},e),{},{feedsBeingDeleted:t.isDeleting?Object(f.uniq)([].concat(l()(e.feedsBeingDeleted),[t.feedId])):Object(f.without)(e.feedsBeingDeleted,t.feedId)})}return e},controls:s.controls,actions:V({},i),selectors:V({},r)});var K=n(3),W=(n(109),n(1)),q=(n(110),n(6)),H=n(15),Q=n.n(H),$=n(11),z=(n(111),Object(d.withSelect)((function(e,t){var n=t.feedId,r=e("nelio-content/data").getFeed,i=e("nelio-content/feed-settings"),o=i.isAddingAFeed,c=i.isDeletingFeed;return{attributes:r(n)||{},isAddingAFeed:o(),isDeleting:c({feedId:n})}}))),J=Object(d.withDispatch)((function(e,t){var n=t.feedId,r=t.attributes,i=void 0===r?{}:r,o=i.name,c=void 0===o?"":o,a=i.twitter,d=void 0===a?"":a,s=e("nelio-content/feed-settings"),u=s.openEditor,l=s.deleteFeed;return{deleteFeed:function(){return l(n)},edit:function(){return u(n,{name:c,twitter:d})}}})),X=Object(q.compose)(z,J)((function(e){var t=e.attributes,n=t.name,r=t.url,i=t.icon,c=t.twitter,a=e.edit,d=e.isDeleting,s=e.isAddingAFeed,u=e.deleteFeed;return Object(o.createElement)("div",{className:Q()({"nelio-content-feed":!0,"nelio-content-feed--is-deleting":d})},Object(o.createElement)("div",{className:"nelio-content-feed__name"},n),Object(o.createElement)("div",{className:"nelio-content-feed__url"},d?Object(o.createElement)("span",null,r):Object(o.createElement)(K.ExternalLink,{href:r},r)),!!c&&Object(o.createElement)("div",{className:"nelio-content-feed__twitter"},"Twitter: ",d?Object(o.createElement)("span",null,c.substr(1)):Object(o.createElement)(K.ExternalLink,{href:"https://twitter.com/".concat(c.substr(1))},c.substr(1))),Object(o.createElement)("div",{className:"nelio-content-feed__icon"},Object(o.createElement)("div",{className:"nelio-content-feed__actual-icon",style:{backgroundColor:i&&"transparent",backgroundImage:i&&"url(".concat(i,")")}})),d?Object(o.createElement)("div",{className:"nelio-content-feed__feedback"},Object(o.createElement)($.DeleteButton,{isDeleting:!0})):Object(o.createElement)("div",{className:"nelio-content-feed__actions"},Object(o.createElement)(K.Button,{isLink:!0,disabled:s,onClick:a},Object(W._x)("Edit","command","nelio-content"))," | ",Object(o.createElement)($.DeleteButton,{onClick:u,disabled:s})))})),Y=Object(d.withSelect)((function(e){return{feeds:(0,e("nelio-content/data").getFeedIds)()}}))((function(e){var t=e.feeds;return Object(m.isEmpty)(t)?Object(o.createElement)("div",{className:"nelio-content-empty-feed-list"},Object(W._x)("Add your first RSS feed using the form above","user","nelio-content")):Object(o.createElement)("div",{className:"nelio-content-feed-list"},t.map((function(e){return Object(o.createElement)(X,{key:e,feedId:e})})))})),Z=(n(112),Object(d.withSelect)((function(e){var t=e("nelio-content/feed-settings"),n=t.getFeedUrl,r=t.isAddingAFeed,i=n();return{value:i,isSaving:r(),isValid:Object(_.isURL)(Object(f.trim)(i))}}))),ee=Object(d.withDispatch)((function(e,t){var n=t.value,r=e("nelio-content/feed-settings"),i=r.addFeed,o=r.setNewFeedUrl;return{setValue:function(e){return o(e)},save:function(){return i(n)}}})),te=Object(q.compose)(Z,ee)((function(e){var t=e.value,n=e.save,r=e.setValue,i=e.isSaving,c=e.isValid;return Object(o.createElement)("div",{className:"nelio-content-new-feed-form"},Object(o.createElement)(K.TextControl,{className:"nelio-content-new-feed-form__input-text",value:t,onChange:function(e){return r(e)},disabled:i,placeholder:Object(W._x)("Write the URL of an RSS feed…","user","nelio-content")}),Object(o.createElement)(K.Button,{className:"nelio-content-new-feed-form__add-button",isPrimary:!0,isBusy:i,onClick:n,disabled:i||!c},i?Object(W._x)("Adding…","text","nelio-content"):Object(W._x)("Add","command","nelio-content")))})),ne=(n(113),Object(d.withSelect)((function(e){var t=e("nelio-content/feed-settings"),n=t.getEditingFeedId,r=t.getEditingFeedName,i=t.getEditingFeedTwitter,o=t.isSavingAFeed,c=e("nelio-content/data").getFeed,a=n(),d=r(),s=i(),u=c(a)||{},l=u.name,f=void 0===l?"":l,b=u.twitter,p=void 0===b?"":b;return{error:re(d,s),feedId:a,isChanged:d!==f||s!==p,isOpen:!!n(),isSaving:o(),name:d,twitter:s}})));function re(e,t){return Object(m.isEmpty)(Object(f.trim)(e))?Object(W._x)("Feed title is missing","text","nelio-content"):!Object(m.isValidTwitterHandler)(t)&&Object(W._x)("Invalid twitter handler","text","nelio-content")}var ie=Object(d.withDispatch)((function(e,t){var n=t.feedId,r=t.isSaving,i=t.name,o=t.twitter,c=e("nelio-content/feed-settings"),a=c.closeEditor,d=c.saveFeed;return{close:function(){return!r&&a()},save:function(){return d(n,{name:i,twitter:o})},setName:c.setEditingFeedName,setTwitter:c.setEditingFeedTwitter}})),oe=Object(q.compose)(ne,ie)((function(e){var t=e.close,n=e.error,r=e.isChanged,i=e.isOpen,c=e.isSaving,a=e.name,d=e.save,s=e.setName,u=e.setTwitter,l=e.twitter;return i?Object(o.createElement)(K.Modal,{title:Object(W._x)("Edit Feed","text","nelio-content"),className:"nelio-content-edit-feed-modal",isDismissible:!c,isDismissable:!c,shouldCloseOnEsc:!c,shouldCloseOnClickOutside:!c,onRequestClose:t},Object(o.createElement)(K.TextControl,{required:!0,label:Object(W._x)("Title","text","nelio-content"),disabled:c,value:a,onChange:s,placeholder:Object(W._x)("Name this feed…","user","nelio-content")}),Object(o.createElement)(K.TextControl,{label:Object(W._x)("Twitter Handler","text","nelio-content"),disabled:c,value:l,onChange:u,placeholder:Object(W._x)("@username","text","nelio-content")}),Object(o.createElement)("div",{className:"nelio-content-edit-feed-modal__actions"},Object(o.createElement)($.SaveButton,{isPrimary:!0,isUpdate:!0,isSaving:c,disabled:!r,error:n,onClick:d}))):null})),ce=function(){return Object(o.createElement)("div",{className:"nelio-content-feed-settings-layout"},Object(o.createElement)(o.StrictMode,null,Object(o.createElement)(K.SlotFillProvider,null,Object(o.createElement)(te,null),Object(o.createElement)(Y,null),Object(o.createElement)(oe,null),Object(o.createElement)(K.Popover.Slot,null))))};window.NelioContent=window.NelioContent||{},window.NelioContent.initPage=function(e){var t=document.getElementById(e);Object(o.render)(Object(o.createElement)(ce,null),t)}},15:function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var c=i.apply(null,r);c&&e.push(c)}else if("object"===o)for(var a in r)n.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},16:function(e,t){!function(){e.exports=this.wp.url}()},17:function(e,t,n){var r=n(29),i=n(30),o=n(24),c=n(31);e.exports=function(e){return r(e)||i(e)||o(e)||c()}},19:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},2:function(e,t){!function(){e.exports=this.wp.data}()},24:function(e,t,n){var r=n(19);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},28:function(e,t){!function(){e.exports=this.NelioContent.data}()},29:function(e,t,n){var r=n(19);e.exports=function(e){if(Array.isArray(e))return r(e)}},3:function(e,t){!function(){e.exports=this.wp.components}()},30:function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},31:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},4:function(e,t){!function(){e.exports=this.wp.dataControls}()},5:function(e,t){!function(){e.exports=this.lodash}()},6:function(e,t){!function(){e.exports=this.wp.compose}()},7:function(e,t){!function(){e.exports=this.regeneratorRuntime}()},8:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},9:function(e,t){!function(){e.exports=this.NelioContent.utils}()}});